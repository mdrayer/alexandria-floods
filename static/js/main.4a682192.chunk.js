(this["webpackJsonpalexandria-floods"]=this["webpackJsonpalexandria-floods"]||[]).push([[0],{219:function(e,t,a){e.exports=a(503)},224:function(e,t,a){},503:function(e,t,a){"use strict";a.r(t);var n,r=a(1),c=a.n(r),l=a(66),o=a.n(l),i=(a(224),a(44)),u=a(8),s=a(507),m=a(508),d=a(29),f=a(509),h=a(110),v=a(28),E=function(e){var t=e.data,a=e.maxYValue,n=e.dataKey,r=e.syncId;return c.a.createElement(v.d,{width:"100%",height:300},c.a.createElement(v.c,{syncId:r,margin:{right:5,bottom:20}},c.a.createElement(v.a,{strokeDasharray:"3 3"}),c.a.createElement(v.e,{dataKey:"elapsedTime",type:"number",ticks:[0,30,60,90,120,150,180],domain:[0,180],label:{value:"Elapsed time (minutes)",position:"bottom",offset:0}}),c.a.createElement(v.f,{dataKey:n,width:20,domain:a&&[0,Math.ceil(a)]||void 0}),t.map((function(e){return c.a.createElement(v.b,{key:e.date,connectNulls:!0,type:"monotone",data:e.data.filter((function(e){return e.elapsedTime<=180})),name:e.date,dataKey:n,stroke:e.color,dot:!1})}))))},p=function(e){var t=e.color;return c.a.createElement("svg",{className:"mr-1 align-middle d-inline-block",width:12,height:12,viewBox:"0 0 ".concat(12," ").concat(12)},c.a.createElement("rect",{fill:t,width:12,height:12}))},b=function(e){var t=e.floodData,a=e.nonFloodData,n=Object(r.useState)(!1),l=Object(u.a)(n,2),o=l[0],i=l[1],m=Object(f.a)([].concat(Object(d.a)(t.map((function(e){return e.data}))),Object(d.a)(a.map((function(e){return e.data}))))),v=Object(h.a)([].concat(Object(d.a)(m.map((function(e){return e.rate}))),Object(d.a)(m.map((function(e){return e.accumulation}))))),b=[].concat(Object(d.a)(t),Object(d.a)(o?a:[])).sort((function(e,t){return Object(s.a)(e.date,t.date)}));return c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col text-center"},c.a.createElement("h2",null,"Precipitation events"),c.a.createElement("div",null,c.a.createElement("input",{type:"checkbox",id:"show-non-flood",name:"show-non-flood",checked:o,onChange:function(){return i(!o)},className:"mr-1 align-middle"}),c.a.createElement("label",{htmlFor:"show-non-flood"},"Show heavy rain events (non-flood)")))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("h3",{className:"text-center"},"Rate"),c.a.createElement(E,{data:b,maxYValue:v,dataKey:"rate"})),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("h3",{className:"text-center"},"Total Accumulation"),c.a.createElement(E,{data:b,maxYValue:v,dataKey:"accumulation"}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("div",{className:"d-flex flex-wrap justify-content-center"},b.map((function(e){return c.a.createElement("div",{key:e.date,className:"px-1"},c.a.createElement(p,{color:e.color}),e.date)}))))),c.a.createElement("div",{className:"row mt-2"},c.a.createElement("div",{className:"col-sm-2"}),c.a.createElement("div",{className:"col-sm-8"},c.a.createElement("div",{className:"alert alert-info"},c.a.createElement("small",null,"Heavy rain non-flood days are defined as having a total accumulation of over 1.5 inches and a maximum precipitation rate of greater than or equal to 1.1 inches. The peak rate for each event is shown around the 80 elapsed minute mark in the chart to show the sudden and intense precipitation leading up to it."))),c.a.createElement("div",{className:"col-sm-2"})))},w=function(){return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("p",null,"In the Hooffs Run/Blue Park neighborhood, there have been 4 major flood events in 2019, 2020, and 2021: ",c.a.createElement("strong",null,"July 8, 2019"),";"," ",c.a.createElement("strong",null,"July 23, 2020"),"; ",c.a.createElement("strong",null,"September 10, 2020"),"; and"," ",c.a.createElement("strong",null,"August 15, 2021"),". Using local personal weather stations (PWS), we gathered data dating back to October 2012 looking for major precipitation events. In the charts below, we show the"," ",c.a.createElement("strong",null,"precipitation rate (inch per hour)")," and"," ",c.a.createElement("strong",null,"total accumulation (inches)")," for selected flood and heavy rain events. Flood events use reds/oranges/yellows, while heavy rain events use blues/greens.")))},g=a(188),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(g.a)(e)?e.toFixed(2)+t:"\u2014"},x=function(e){var t=e.data;return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Time"),c.a.createElement("th",null,"Rate"),c.a.createElement("th",null,"Accum."))),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",{key:e.time},c.a.createElement("th",null,e.time),c.a.createElement("td",{align:"right"},y(e.rate," in.")),c.a.createElement("td",{align:"right"},y(e.accumulation," in.")))}))))},O=function(e){var t=e.data;return c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h2",{className:"text-center"},"Detailed data for flood events"))),c.a.createElement("div",{className:"row"},t.sort((function(e,t){return Object(s.a)(e.date,t.date)})).map((function(e){return c.a.createElement("div",{className:"col-lg-6 col-xl-3",key:e.date},c.a.createElement("h3",{className:"text-center"},e.date),c.a.createElement(x,{data:e.data.filter((function(e,t){return t<14}))}))}))))},N=a(27),j=a(189);!function(e){e.SEVERE_THUNDERSTORM="Severe Thunderstorm",e.FLASH_FLOOD="Flash Flood",e.FLOOD="Flood"}(n||(n={}));var k=n,A=function(e){var t=e.currentSort,a=e.sortAsc,n=e.sortDesc,r=e.onClick,l=e.label,o="";return t===n?o="-down":t===a&&(o="-up"),c.a.createElement("button",{className:"btn text-white font-weight-bold",type:"button",onClick:function(){r(t===n?a:n)}},l,"\xa0",c.a.createElement("i",{className:"fas fa-sort".concat(o)}))};function S(e,t){var a=t[e];return a?Object(j.a)(a.map((function(e){return e.ph_name}))).sort().join(", "):null}var D=function(e){var t=e.data,a=e.nwsData,n=e.floodDates,l=Object(r.useState)("date-desc"),o=Object(u.a)(l,2),d=o[0],f=o[1],h=Object(r.useMemo)((function(){var e=a.filter((function(e){return"Warning"===e.sig_name&&(e.ph_name===k.FLASH_FLOOD||e.ph_name===k.FLOOD||e.ph_name===k.SEVERE_THUNDERSTORM)})),n=Object(N.b)().key((function(e){var t=e.issued.split(" ");return Object(u.a)(t,1)[0]})).object(e);return t.map((function(e){return Object(i.a)({},e,{warnings:S(e.key,n)})}))}),[t,a]);return c.a.createElement("div",{className:"row border-top justify-content-center mt-3 pt-3"},c.a.createElement("div",{className:"col-lg-8"},c.a.createElement("h2",{className:"text-center"},"Daily data for significant rain dates"),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{style:{width:"20%"}},c.a.createElement(A,{label:"Date",currentSort:d,sortAsc:"date-asc",sortDesc:"date-desc",onClick:f})),c.a.createElement("th",{style:{width:"20%"}},c.a.createElement(A,{label:"Max precip. rate",currentSort:d,sortAsc:"rate-asc",sortDesc:"rate-desc",onClick:f})),c.a.createElement("th",{style:{width:"20%"}},c.a.createElement(A,{label:"Total accumulation",currentSort:d,sortAsc:"accum-asc",sortDesc:"accum-desc",onClick:f})),c.a.createElement("th",{className:"text-center"},"NWS Warnings",c.a.createElement("br",null),c.a.createElement("small",null,"issued that day")))),c.a.createElement("tbody",{style:{fontSize:"0.8rem"}},h.sort((function(e,t){switch(d){case"accum-asc":return Object(m.a)(e.value.maxAccumulation||0,t.value.maxAccumulation||0);case"accum-desc":return Object(s.a)(e.value.maxAccumulation||0,t.value.maxAccumulation||0);case"rate-asc":return Object(m.a)(e.value.maxRate||0,t.value.maxRate||0);case"rate-desc":return Object(s.a)(e.value.maxRate||0,t.value.maxRate||0);case"date-asc":return Object(m.a)(e.key,t.key);case"date-desc":default:return Object(s.a)(e.key,t.key)}})).map((function(e){return c.a.createElement("tr",{key:e.key,className:n.includes(e.key)?"flood-date":void 0},c.a.createElement("th",null,c.a.createElement("a",{href:"https://www.wunderground.com/dashboard/pws/KVAALEXA9/table/".concat(e.key,"/").concat(e.key,"/daily#history-toolbar"),className:n.includes(e.key)?"text-white":void 0},e.key)),c.a.createElement("td",{align:"right"},y(e.value.maxRate," in.")),c.a.createElement("td",{align:"right"},y(e.value.maxAccumulation," in.")),c.a.createElement("td",null,e.warnings))}))))))},_=a(47),R=a.n(_),T=a(109),F=a(510);function W(e){return V.apply(this,arguments)}function V(){return(V=Object(T.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(F.a)(t,(function(e){var t=e.Date,a=e.Time,n=e["Precip. Rate."],r=e["Precip. Accum."];return{date:String(t),time:String(a),rate:n&&0!==n.length?Number(n):null,accumulation:r&&0!==r.length?Number(r):null}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(){var e=Object(T.a)(R.a.mark((function e(){var t,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("/alexandria-floods/data/all.csv");case 2:return t=e.sent,a=Object(N.b)().key((function(e){return e.date})).rollup((function(e){return{maxRate:Object(h.a)(e.map((function(e){return e.rate}))),maxAccumulation:Object(h.a)(e.map((function(e){return e.accumulation}))),data:e}})).entries(t),e.abrupt("return",a.sort((function(e,t){return Object(s.a)(e.key,t.key)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function M(e){return e?e.trim():""}var I=function(){return Object(F.a)("/alexandria-floods/data/".concat("vtec_VAC510.csv"),(function(e){return{iso_issued:M(e.iso_issued),issued:M(e.issued),iso_expired:M(e.iso_expired),expired:M(e.expired),eventid:Number(M(e.eventid)),phenomena:M(e.phenomena),significance:M(e.significance),hvtec_nwsli:M(e.hvtec_nwsli),wfo:M(e.wfo),name:M(e.name),ph_name:M(e.ph_name),sig_name:M(e.sig_name)}}))},C=["#c2026f","#f54352","#ff882b","#ffcc00"],K=["#000048","#002871","#00437f","#005b6e","#007246","#008400"];var P=function(e,t){var a=(e.getTime()-t.getTime())/1e3/60;return Math.abs(Math.round(a))};var H=function(e,t){var a=e.split("-").map(Number),n=Object(u.a)(a,3),r=n[0],c=n[1],l=n[2],o=t.split(" "),i=Object(u.a)(o,2),s=i[0],m=i[1],d=s.split(":").map(Number),f=Object(u.a)(d,2),h=f[0],v=f[1],E=h;"PM"===m?12!==E&&(E+=12):"AM"===m&&12===E&&(E=0);var p=new Date(r,c,l,E,v);return p instanceof Date&&!isNaN(p.getTime())||console.warn("Invalid date supplied to Date function. Check values:\n- date string: ".concat(e,"\n- time string: ").concat(t,"\n- parsed year: ").concat(r,"\n- parsed month: ").concat(c,"\n- parsed day: ").concat(l,"\n- parsed hour: ").concat(h,"\n- parsed minute: ").concat(v,"\n- parsed time period: ").concat(m,"\n")),p},B=["2019-07-08","2020-07-23","2020-09-10","2021-08-15"];var J=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(null),o=Object(u.a)(l,2),d=o[0],f=o[1];Object(r.useEffect)((function(){L().then(n),I().then(f)}),[]);var h=a?a.filter((function(e){return B.includes(e.key)})).sort((function(e,t){return Object(s.a)(e.value.maxAccumulation||0,t.value.maxAccumulation||0)})).map((function(e,t){var a=e.value.data.findIndex((function(e){return e.rate&&e.rate>.5})),n=a>=2?a-2:0,r=null;return{date:e.key,data:e.value.data.filter((function(e,t){return t>=n})).map((function(e,t){r||(r=H(e.date,e.time));var a=H(e.date,e.time);return Object(i.a)({},e,{elapsedTime:P(r,a)})})).sort((function(e,t){return Object(m.a)(e.elapsedTime,t.elapsedTime)})),color:C[t]}})):null,v=a&&a.filter((function(e){return!B.includes(e.key)})).filter((function(e){return e.value.maxAccumulation&&e.value.maxAccumulation>=1.5&&e.value.maxRate&&e.value.maxRate>=1.1})).sort((function(e,t){return Object(s.a)(e.value.maxAccumulation||0,t.value.maxAccumulation||0)})).map((function(e,t){var a=e.value.data.findIndex((function(t){return t.rate===e.value.maxRate})),n=a>-1?e.value.data[a]:void 0,r=n&&H(n.date,n.time),c=null;return{date:e.key,data:e.value.data.filter((function(e,t){if(!r)return!0;if(t>a)return!0;var n=H(e.date,e.time);return P(r,n)<=80})).map((function(e){c||(c=H(e.date,e.time));var t=H(e.date,e.time);return Object(i.a)({},e,{elapsedTime:P(c,t)})})).sort((function(e,t){return Object(m.a)(e.elapsedTime,t.elapsedTime)})),color:K[t]}}));return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"header text-center"},c.a.createElement("h1",null,"Precipitation Stats for Major Flash Flood Events in Hooffs Run, Alexandria,\xa0VA")),c.a.createElement(w,null),h&&v?c.a.createElement("div",null,c.a.createElement(b,{floodData:h,nonFloodData:v}),c.a.createElement("hr",null),c.a.createElement(O,{data:h})):c.a.createElement("div",{className:"row align-items-center"},c.a.createElement("div",{className:"col text-center"},c.a.createElement("div",{className:"spinner-border",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))),a&&d?c.a.createElement(D,{data:a,nwsData:d,floodDates:B}):null,c.a.createElement("hr",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col text-center"},c.a.createElement("p",{className:"mb-0"},"Local weather data retrieved from"," ",c.a.createElement("a",{href:"https://www.wunderground.com/dashboard/pws/KVAALEXA9",target:"_blank",rel:"noopener noreferrer"},"PWS Rosemont Park - KVAALEXA9")),c.a.createElement("p",{className:"mb-0"},"National Weather Service (NWS) Watch, Warning, and Advisories data retrieved from"," ",c.a.createElement("a",{href:"https://mesonet.agron.iastate.edu/vtec/search.php#byugc/VA/VAC510/20000101/20200913",target:"_blank",rel:"noopener noreferrer"},"Iowa State University")),c.a.createElement("p",null,"Icons made by"," ",c.a.createElement("a",{href:"https://www.flaticon.com/authors/good-ware",title:"Good Ware"},"Good Ware")," ","from"," ",c.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[219,1,2]]]);
//# sourceMappingURL=main.4a682192.chunk.js.map